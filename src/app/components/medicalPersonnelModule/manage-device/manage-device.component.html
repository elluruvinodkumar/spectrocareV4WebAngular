<div class="container-fluid ">
    <div class="row ">
        <div class="col-md-12 p-0">
            <app-header [titleData]="titleArray"></app-header>
        </div>
    </div>
</div>
<div class="container-fluid " style="background-color: #F5F8FA;">

    <div class="row bg-white">

        <div class="pl-4 pb-3 pt-3 component-heading">
            <img class="left-arrow" style="cursor: pointer;" *ngIf="viewDeviceInfo" (click)="closeViewDeviceInfo()"
                src="../../../../assets/images/ui/Medical-Personnel-Module/icons/Icon feather-chevron-left.png">
            Manage Device
        </div>
    </div>

    <div class="row pt-3" *ngIf="!viewDeviceInfo">
        <div class="col-md-3">
            <div class="btn btn-sm add-button-styles" style=""
                (click)="openScanDevicesMethod(openScanDevicesModelContent)">Add New Device</div>
        </div>
        <div class="col-md-6">
            <div class="input-group input-placeholder mb-3">
                <div class="input-group-prepend">
                    <span class="input-group-text" style="background: #ffffff;border: none;">
                        <img style="width: 1.1rem;"
                            src="../../../../assets/images/ui/Icons/patient-medical-module/Icon feather-search.png">
                    </span>
                </div>
                <input type="text" [(ngModel)]="term" class=" p-2 w-100 form-control t-12" placeholder="Search" style="border: none; outline-style: none !important;font-size: 14px;
                font-weight: 500;padding-right: 100%;letter-spacing: 0px;
            color: #8D8D8D;opacity: 1;font-family: 'Muli' !important;
            height: 34px;padding-left: 10px !important;background-color: #ffffff ;"
                    (keyup)='search($event.target.value)'>
                <!-- font-size: 14px; font-weight: 500;padding-right: 100%; (keyup)="findText(term)"-->
            </div>
        </div>
        <div class="col-md-3">
            <div class="form-control t-12 mt-placeHolder  mb-3" style="height: 33px;border: none;">
                <mat-select (selectionChange)="showData($event.value)" panelClass="my-panel" style="color: black;"
                    placeholder="Filter by">
                    <!--[value]="selected" -->
                    <mat-option *ngFor="let letSearch of searchByValue" [value]="letSearch.viewValue">
                        {{letSearch.viewValue}}
                    </mat-option>
                </mat-select>
            </div>
        </div>
    </div>

    <div class="table-responsive p-2" *ngIf="!viewDeviceInfo">
        <div class="scroll tableFixHead">
            <table class="table text-center ">
                <thead class="" style="background-color: #3E454C;color: white;">
                    <tr class="p-0" style="font-weight: normal;">
                        <th class="p-0" scope="col" class="border  text-center">Device Name</th>
                        <th class="p-0" scope="col" class="border text-center">Model No</th>
                        <th class="p-0" scope="col" class="border text-center">Serial No</th>
                        <th class="p-0" scope="col" class="border text-center">Manufacturer</th>
                        <th class="p-0" scope="col" class="border text-center">Location</th>
                        <th class="p-0" scope="col" class="border text-center">Status</th>
                        <th class="p-0" scope="col" class="border  text-center">Action</th>
                    </tr>
                </thead>
                <tbody>
                    <tr *ngIf="!(listOfDevices && listOfDevices.length)"
                        style="text-align: center;background-color: white;padding: 20px;">
                        <td style="text-align: center;font-size: 12px;font-weight: 600;" colspan="7">
                            Don't have Devices
                        </td>
                    </tr>

                    <tr class="bg-white" style="background: #FFFFFF 0% 0% no-repeat padding-box !important;
                    box-shadow: 0px 6px 12px #44444414;
                    border-radius: 6px;
                    opacity: 1;" *ngFor="let selectedDevice of listOfDevices | filter:term; let i = index">

                        <td>
                            <div class="pt-name">{{selectedDevice.deviceName}}</div>
                        </td>
                        <td>
                            <div class="pt-name">{{selectedDevice.deviceModelNumber}}</div>
                        </td>
                        <td>
                            <div class="pt-name">{{selectedDevice.deviceSerialNumber}}</div>
                        </td>
                        <td>
                            <div class="pt-name">{{selectedDevice.manufacturer}}</div>
                        </td>

                        <td>
                            <div class="pt-name">{{selectedDevice.location}}</div>
                        </td>
                        <td>
                            <div>
                                <div class="btn btn-sm butn-styl" *ngIf="selectedDevice.status == 'Connected'"
                                    style="background: #EBEBEB;">
                                    <!--padding: 4px 17px;-->
                                    Connected
                                </div>
                                <div class="btn btn-sm butn-styl1" *ngIf="selectedDevice.status =='Connecting'"
                                    style="font-size: 11px;background: #EBEBEB ;">
                                    <!--padding: 4px 17px;-->
                                    <span class="spinner-border text-muted" style="height: 10px;
                                                        width: 10px;
                                                        margin-right: 5px;"></span>Connecting
                                </div>
                                <div class="btn btn-sm butn-styl2" *ngIf="selectedDevice.status =='Connect'" style="font-size: 11px;font-weight: 500;background: #EBEBEB ;
                                    color: #000000;" (click)="connectDeviceMethod(selectedDevice)">
                                    <!--padding: 4px 17px;-->
                                    Connect
                                </div>
                            </div>
                        </td>
                        <td class="menu" style="text-align: center; overflow: hidden; ">
                            <div style="display: flex; justify-content: space-around;">

                                <div>
                                    <button [matMenuTriggerFor]="beforeMenu"
                                        aria-label="Example icon-button with a menu" style="color: #53b8c5;background-color: Transparent;
                                background-repeat:no-repeat;
                                border: none;
                                cursor:pointer;
                                overflow: hidden;
                                outline:none;">
                                        <img style="" class="crossImg"
                                            src="../../../assets/images/ui/Icons/1x/menu.png">
                                    </button>
                                </div>
                            </div>
                            <mat-menu #menu="matMenu" class="menudata" #beforeMenu="matMenu" xPosition="before">
                                <button mat-menu-item class="menuItembtn"
                                    (click)="openViewDeviceInfoMethod(selectedDevice)" style="outline: none !important;"
                                    *ngIf=" 'Cancelled' !== selectedDevice.appointmentStatus">
                                    <span>Device Information</span>
                                </button>
                                <ng-template #viewTestReportModelContent let-modal>
                                    <div class="modal-header" style="color: #ffffff;
                                        background: #53B9C6 0% 0% no-repeat padding-box;border: 1px solid #CECECE;opacity: 1;
                                        ">
                                        <span class="modal-title justify-content-center" id="modal-basic-title">
                                            Test Report</span>
                                        <img style="width:18px;cursor: pointer;" class="crossImg"
                                            (click)="modal.dismiss('Cross click')"
                                            src="../../../assets/images/ui/Icons/1x/ic_cancel.png">
                                    </div>
                                    <div class="modal-body">
                                        <div>
                                            <div class="row" style="display: flex; justify-content: space-between;
                                            margin: 8px;">
                                                <!-- <div style="display: flex;"> -->
                                                <div class="t-16">
                                                    Date/Time:
                                                    {{selectedDevice.testedTime * 1000 | date: 'dd/MM/yyyy hh:mm a'}}
                                                </div>
                                                <div class="t-16">
                                                    Patient Name : {{selectedDevice.patientName}}
                                                </div>
                                                <div class="imgs-margin" style="">
                                                    <img style="width: 1.2rem;margin: 0 25px;"
                                                        src="../../../../assets/images/ui/Medical-Personnel-Module/icons/Icon-awesome-print.png">
                                                    <!-- </div>
                                                <div> -->
                                                    <img style="width: 1.2rem;"
                                                        src="../../../../assets/images/ui/Medical-Personnel-Module/icons/Icon-awesome-share.png">
                                                </div>
                                                <!-- </div> -->
                                            </div>

                                            <div class="table-responsive  tableFixHead ">
                                                <!--scroll-->
                                                <table class="table text-center table-bordered">
                                                    <!--style="border: 1px solid #707070;"-->
                                                    <thead class="" style="background: #53B9C6 0% 0% no-repeat padding-box;
                                                    opacity: 1;">
                                                        <tr class="p-0" style="font-weight: normal;">
                                                            <!-- <th class="p-0" scope="col" class="border text-center">No</th> -->
                                                            <th class="p-0" scope="col" class="border  text-center">Test
                                                                Name
                                                            </th>
                                                            <th class="p-0" scope="col" class="border text-center">
                                                                Result
                                                            </th>
                                                            <th class="p-0" scope="col" class="border text-center">Flag
                                                            </th>
                                                            <th class="p-0" scope="col" class="border text-center">Unit
                                                            </th>
                                                            <th class="p-0" scope="col" class="border text-center">
                                                                Reference Range</th>
                                                        </tr>
                                                    </thead>
                                                    <tbody>
                                                        <tr class="bg-white" style="background: #FFFFFF 0% 0% no-repeat padding-box !important;
                                                        box-shadow: 0px 6px 12px #44444414;
                                                        border-radius: 6px;
                                                        opacity: 1;"
                                                            *ngFor="let itemData of selectedDevice.testFactors ; let i = index">
                                                            <td style="text-align: start;">
                                                                <div style="padding-left: 10px;">
                                                                    {{itemData.testName}}</div>
                                                            </td>
                                                            <td>
                                                                <div> {{itemData.value}}
                                                                </div>
                                                            </td>
                                                            <td>
                                                                <div *ngIf="(itemData.flag === false)">Normal</div>
                                                                <div *ngIf="(itemData.flag === true)">Abnormal</div>
                                                            </td>
                                                            <td>{{itemData.unit}}</td>
                                                            <td>{{itemData.healthReferenceRanges}}</td>

                                                        </tr>
                                                    </tbody>
                                                </table>
                                            </div>

                                            <div class="t-16" style="padding: 15px 0px 5px 0px;">
                                                <label>Opinions/Interpretations</label>
                                            </div>
                                            <div>
                                                <textarea disabled tabindex="-1" style="background: white; width: -webkit-fill-available;padding: 10px;border: 1px solid #c3bfbf;
                                                    opacity: 1;"
                                                    *ngIf="selectedDevice.doctorComments && selectedDevice.doctorComments.length"
                                                    [value]="selectedDevice.doctorComments[0].comment">

                                                </textarea>

                                                <textarea tabindex="-1" style="width: -webkit-fill-available;padding: 10px;border: 1px solid #c3bfbf;
                                                    opacity: 1;"
                                                    *ngIf="selectedDevice.doctorComments && !selectedDevice.doctorComments.length"> <!--#707070-->

                                                </textarea>

                                            </div>
                                        </div>
                                        <div class="row">
                                            <div style="font-family: 'Muli'; font-size: 14px;font-weight: 500;color: #8A8989;margin: 15px;
                                            letter-spacing: 0px;
opacity: 1;">
                                                Last updated by Dr. {{selectedDevice.testedPersonName}} at
                                                {{selectedDevice.testedTime | date: 'hh:mm a'}} on
                                                {{selectedDevice.testedTime | date: 'dd/MM/yyyy'}}
                                            </div>
                                        </div>
                                        <div>
                                            <div class="" style="text-align: center;padding: 25px 0 10px 0;">
                                                <button tabindex="-1" class="btn btn-sm"
                                                    style="outline-style: none;font-size: 15px; height: 34px;padding: 0 30px;
                                                    background: #53B9C6 0% 0% no-repeat padding-box;border-radius: 10px;opacity: 1;
                                                    font-family: 'Muli';font-weight: 600;letter-spacing: 0px;color: #FFFFFF;"
                                                    (click)="modal.dismiss('Cross click')">Close
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                </ng-template>
                                <button mat-menu-item class="menuItembtn" style="outline: none !important;"
                                    (click)="openDisconnectMethod(openDisconnectModelContent,selectedDevice)">
                                    <span>Disconnect</span>
                                </button>
                                <ng-template #openDisconnectModelContent let-modal>

                                    <div class="modal-body">
                                        <div class="modal-body bg-white" style="padding: 0px;">
                                            <div class="container" style="padding: 16px;">
                                                <div class="model-bold">Disconnect Device</div>
                                                <div style="text-align: center;">
                                                    <ul>
                                                        <li class="modal-body-data" style="">Are you sure you want to
                                                            disconnect this device?
                                                        </li>
                                                    </ul>
                                                </div>
                                                <div style="text-align: center;margin-top: 20px; margin-bottom: 25px;">
                                                    <!-- <div *ngIf="isLoading"
                                                                                    style="display: flex; justify-content: center; padding-bottom: 5px;">
                                                                                    <mat-progress-spinner class="example-margin" color="primary"
                                                                                        mode="indeterminate" [diameter]="30">
                                                                                    </mat-progress-spinner> 
                                                                            </div>-->
                                                    <div class="row" style="justify-content: center;">
                                                        <button class="btn btn-sm mr-3 btn-text-style-1"
                                                            (click)="modal.close('Close click')">Cancel
                                                        </button>
                                                        <button class="btn btn-sm btn-text-style-2">Delete
                                                        </button>
                                                    </div>
                                                </div>


                                            </div>
                                        </div>
                                    </div>
                                </ng-template>
                                <button mat-menu-item class="menuItembtn"
                                    (click)="openRemoveMethod(openRemoveModelContent,selectedDevice)"
                                    style="outline: none !important;"
                                    *ngIf=" 'Cancelled' !== selectedDevice.appointmentStatus">
                                    <span>Remove Device</span>
                                </button>
                                <ng-template #openRemoveModelContent let-modal>
                                    <div class="modal-body">
                                        <div class="modal-body bg-white" style="padding: 0px;">
                                            <div class="container" style="padding: 16px;">
                                                <div class="model-bold">Remove Device</div>
                                                <div style="text-align: center;">
                                                    <ul>
                                                        <li class="modal-body-data" style="">Are you sure you want to
                                                            remove this device? This action cannot be undone.
                                                        </li>
                                                    </ul>
                                                </div>
                                                <div style="text-align: center;margin-top: 20px; margin-bottom: 25px;">
                                                    <!-- <div *ngIf="isLoading"
                                                                                    style="display: flex; justify-content: center; padding-bottom: 5px;">
                                                                                    <mat-progress-spinner class="example-margin" color="primary"
                                                                                        mode="indeterminate" [diameter]="30">
                                                                                    </mat-progress-spinner> 
                                                                            </div>-->
                                                    <div class="row" style="justify-content: center;">
                                                        <button class="btn btn-sm mr-3 btn-text-style-1"
                                                            (click)="modal.close('Close click')">Cancel
                                                        </button>
                                                        <button class="btn btn-sm btn-text-style-2">Remove
                                                        </button>
                                                    </div>
                                                </div>


                                            </div>
                                        </div>
                                    </div>
                                </ng-template>
                            </mat-menu>
                        </td>
                    </tr>

                </tbody>
            </table>
        </div>
    </div>

    <div class="bg-white mt-2 mb-2" *ngIf="viewDeviceInfo" style="padding: 0px;">
        <div class="p-0">
            <div class="row p-0 py-2 bg-white">
                <!-- <div class="p-0">
                    <div class="bg-white px-0 py-2 p-0"></div>
                </div> -->
            </div>
        </div>
        <div class="p-0">

            <div class="row p-0" style="">
                <div class="p-2 col-md-12" style="background: #F8F8F8 ;display: flex;
                justify-content: space-between;">
                    <div style="font-size: 14px;font-weight: 600;letter-spacing: 0.3;padding-left: 30px;">Device
                        Information</div>
                    <!-- <img style="" class="closeImg" (click)="closeViewDeviceInfo()"
                        src="../../../assets/images/ui/Icons/1x/cancel.png"> -->
                </div>
            </div>

            <div class=" p-0">
                <div class="p-0 col-md-12" style="background: #FFFFFF ;display: flex;">
                    <div class="container-fluid" style="padding: 20px;">
                        <div class="row">
                            <div class="col-md-3 col-5" style="text-align: center;">
                                <div class="" style="border: 1px solid #707070;
                                opacity: 1;">
                                    <img class="img-fluid" src="{{baseURL+selectedDeviceInfo.deviceImagePath}}">
                                </div>
                                <div>
                                    <div class="" style="display: flex; justify-content: center;padding: 15px;">
                                        <div style="margin-right: 10px;">
                                            <img class="wifi-theme-color" *ngIf="wifiOn"
                                                src="../../../../assets/images/ui/Medical-Personnel-Module/icons/wifi1.png">
                                            <img class="wifi-theme-color" *ngIf="!wifiOn"
                                                src="../../../../assets/images/ui/Medical-Personnel-Module/icons/wifi2.png">
                                        </div>
                                        <div style="">
                                            <div class="btn btn-sm btn-style" style="background: #EBEBEB ;opacity: 1;">
                                                Disconnected</div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="col-md-4 col-5 device-info-align" style="">
                                <div class="row device-info-row">
                                    <div class="col-6 deviceInfoKey">Device Name</div>
                                    <div class="col-6 deviceInfoValue">{{selectedDeviceInfo.deviceName}}</div>
                                </div>
                                <div class="row device-info-row">
                                    <div class="col-6 deviceInfoKey">Model No</div>
                                    <div class="col-6 deviceInfoValue">{{selectedDeviceInfo.deviceModelNumber}}</div>
                                </div>
                                <div class="row device-info-row">
                                    <div class="col-6 deviceInfoKey">Product Serial No</div>
                                    <div class="col-6 deviceInfoValue">{{selectedDeviceInfo.deviceSerialNumber}}</div>
                                </div>
                                <div class="row device-info-row">
                                    <div class="col-6 deviceInfoKey">Hardware Version</div>
                                    <div class="col-6 deviceInfoValue">{{selectedDeviceInfo.deviceHardwareVersion}}
                                    </div>
                                </div>
                                <div class="row device-info-row">
                                    <div class="col-6 deviceInfoKey">Software Version</div>
                                    <div class="col-6 deviceInfoValue">{{selectedDeviceInfo.deviceSoftwareVersion}}
                                    </div>
                                </div>
                                <div class="row device-info-row">
                                    <div class="col-6 deviceInfoKey">Test Method</div>
                                    <div class="col-6 deviceInfoValue">{{selectedDeviceInfo.testMethod}}</div>
                                </div>
                                <div class="row device-info-row">
                                    <div class="col-6 deviceInfoKey">Manufacturer</div>
                                    <div class="col-6 deviceInfoValue">{{selectedDeviceInfo.manufacturer}}</div>
                                </div>
                                <div class="row device-info-row">
                                    <div class="col-6 deviceInfoKey">Location</div>
                                    <div class="col-6 deviceInfoValue">{{selectedDeviceInfo.location}}</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class=" p-0" style="">
                <div class="p-2 col-md-12" style="background: #F8F8F8 ;">
                    <div style="font-size: 14px;font-weight: 600;letter-spacing: 0.3;">Connection</div>

                </div>
            </div>

            <div class=" p-0">
                <div class="p-0 col-md-12" style="background: #FFFFFF ;display: flex;">

                    <div class="col-2"></div>

                    <div class="col-8" style="padding-bottom: 15px;">
                        <div class="row" style="display: flex; justify-content: space-between;padding: 15px;">

                            <div class="deviceInfoKey">Device Wifi</div>
                            <div>
                                <mat-slide-toggle (change)="onOffWifi($event)"></mat-slide-toggle>
                            </div>

                        </div>
                        <div class="row">
                            <div class="deviceInfoKey" style="padding: 0 0 15px 15px;">Connect the device to a Wi-Fi
                                network</div>
                        </div>
                        <div class="available-wifi-devices">
                            <!--availableDevices-->
                            <div *ngIf="!(wifiOn)" style="height: 15vh;">

                            </div>
                            <div *ngIf="wifiOn">
                                <div *ngFor="let availableDevice of availableDevices;let i=index"
                                    [ngClass]="{'highlighted': availableDevice.id === selectedRow  }"
                                    (click)="openEnterPwdModelMethod(openEnterPwdModelContent, availableDevice)">
                                    <!--selectWifiDeviceFromList(availableDevice) &&-->
                                    <div class="row" style="padding: 5px 0px 5px 20px;
                                    ">
                                        <div class="col-md-1 col-2">
                                            <div class="tick-mark-alignment" *ngIf="availableDevice.id === selectedRow">
                                                <img class="tick-mark" style=""
                                                    src="../../../../assets/images/ui/Icons/Icon-awesome-check-circle.png">
                                            </div>
                                        </div>
                                        <div class="col-md-9 col-6 p-0">

                                            <span class="deviceInfoKey">
                                                {{availableDevice.name}}
                                            </span>
                                        </div>
                                        <div class="col-md-2 col-3 d-flex small-screen-padding"
                                            style="justify-content: center;">

                                            <img class="selected-wifi" style="margin-right: 7px;"
                                                src="../../../../assets/images/ui/Medical-Personnel-Module/icons/lock.png">
                                            <!-- </div>
                                            <div> -->
                                            <img class="selected-wifi"
                                                src="../../../../assets/images/ui/Medical-Personnel-Module/icons/wifi4.png">

                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class=" p-0" style="">
                <div class="p-2 col-md-12" style="background: #F8F8F8 ;">
                    <div style="font-size: 14px;font-weight: 600;letter-spacing: 0.3;">Battery</div>

                </div>
            </div>

            <div class=" p-0">
                <div class="p-0 col-md-12" style="background: #FFFFFF ;display: flex;padding: 30px 15px;">
                    <div class="col-2"></div>

                    <div class="col-8" style="">
                        <div class="row" style="display: flex; justify-content: space-between;padding: 15px;">

                            <div class="deviceInfoKey">Battery</div>
                            <div class="deviceInfoKey">
                                90 %
                            </div>

                        </div>
                    </div>
                </div>
            </div>
            <div class=" p-0" style="">
                <div class="p-2 col-md-12" style="background: #F8F8F8 ;">
                    <div style="font-size: 14px;font-weight: 600;letter-spacing: 0.3;">Updates</div>

                </div>
            </div>

            <div class=" p-0">
                <div class="p-0 col-md-12 col-sm-12" style="background: #FFFFFF ;display: flex;padding: 30px 15px;">
                    <div class="col-md-3 col-2"></div>

                    <div class="col-md-6 col-sm-10" style="">
                        <div class="row update-row-data" style="display: flex;">
                            <div class="col-6">
                                <div class="deviceInfoKey">Current Firmware Version</div>
                            </div>
                            <div class="col-6">
                                <div class="deviceInfoValue">V1.0.1.0</div>
                            </div>

                        </div>
                        <div class="row update-row-data" style="display: flex;">
                            <div class="col-6">
                                <div class="deviceInfoKey">Last Successful Update</div>
                            </div>
                            <div class="col-6">
                                <div class="deviceInfoValue">{{lastSuccessfullUpdate | date: 'dd/MM/yyyy hh:mm a'}}
                                </div>
                            </div>
                        </div>
                        <div class="row update-row-data" style="display: flex; ">
                            <div class="col-6">
                                <div class="deviceInfoKey">Last check for Update</div>
                            </div>
                            <div class="col-6">
                                <div class="deviceInfoValue">{{lastCheckForUpdate | date: 'dd/MM/yyyy hh:mm a'}}</div>
                            </div>
                        </div>
                        <div class="row" *ngIf="!wifiOn" style="height: 20vh;"></div>
                        <div class="row " *ngIf="wifiOn" style="display: flex;padding: 15px 15px 20vh 15px;">
                            <div class="col-6"></div>
                            <div class="col-6">
                                <div class="btn btn-sm btn-style "
                                    style="color: #000000; background: #EBEBEB ;opacity: 1;"
                                    (click)="openCheckForUpdateMethod(openCheckForUpdateModelContent)">
                                    <div class="spinner-border"></div>
                                    Check for update
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

        </div>
    </div>

</div>

<ng-template #openUnableToConnectModelContent let-modal>

    <div class="modal-body">
        <div class="modal-body bg-white" style="padding: 0px;">
            <div class="container" style="padding: 16px;">
                <div class="row">
                    <div class="col-md-4 col-3 col-sm-3" style="text-align: center; margin-top: 20px;">
                        <img class="warn-icon"
                            src="../../../../assets/images/ui/Medical-Personnel-Module/icons/urn_aaid.png">
                    </div>
                    <div class="col-md-8 col-9 col-sm-9">
                        <div class="model-bold">Unable to Connect</div>
                        <div style="text-align: start;">
                            <ul>
                                <li class="modal-body-data" style="">Network error:</li>
                                <li class="modal-body-data" style="white-space: nowrap;">Please check your network
                                    connection
                                </li>
                            </ul>
                        </div>
                        <div style="text-align: center;margin-top: 20px; margin-bottom: 25px;">
                            <!-- <div *ngIf="isLoading"
                                                            style="display: flex; justify-content: center; padding-bottom: 5px;">
                                                            <mat-progress-spinner class="example-margin" color="primary"
                                                                mode="indeterminate" [diameter]="30">
                                                            </mat-progress-spinner> 
                                                    </div>-->
                            <div class="row" style="justify-content: center;">
                                <button class="btn btn-sm mr-3 btn-text-style-1"
                                    (click)="modal.close('Close click')">Cancel
                                </button>
                                <button class="btn btn-sm btn-text-style-2">Try Again
                                </button>
                            </div>
                        </div>

                    </div>
                </div>
            </div>
        </div>
    </div>
</ng-template>

<ng-template #openEnterPwdModelContent let-modal>
    <div class="modal-header" style="color: #ffffff;
    background: #53B9C6 0% 0% no-repeat padding-box;border: 1px solid #CECECE;opacity: 1;">
        <div class="modal-title justify-content-center" style="" id="modal-basic-title">Enter Password</div>
        <img (click)="modal.close('Close click')" style="cursor: pointer;width: 1.2rem;"
            src="../../../../assets/images/ui/Icons/patient-medical-module/Icon material-cancel.png">
    </div>
    <div class="modal-body bg-white" style="padding: 0px;">
        <div class="container" style="padding: 16px;">
            <div class="row">
                <div class="col-md-3 col-sm-3 col-3" style="text-align: center;padding-top: 20px;">
                    <img class="wifi-img" src="../../../../assets/images/ui/Medical-Personnel-Module/icons/wifi4.png">
                </div>
                <div class="col-md-9 col-sm-9 col-9">
                    <div style="text-align: start;">
                        <ul>
                            <li class="modal-body-data" style="display: flex;">
                                <div class="deviceInfoKey" style="padding: 10px;">Network Name</div>
                                <div class="deviceInfoValue" style="padding: 10px;">Network Name</div>
                            </li>
                            <li class="modal-body-data" style="display: flex;line-height: 1;">
                                <div class="deviceInfoKey" style="padding: 10px;">Password</div>
                                <!-- <input type="text" class="deviceInfoValue" style="outline-style: none;height: 30px;
                                padding: 10px;"> -->
                                <input placeholder="Password" type="{{password}}"
                                    class="deviceInfoValue deviceInfoValue-input" style="">
                                <span *ngIf="isPassword" (click)="showPassword()">
                                    <i class="fa fa-fw fa-eye field-icon1"></i>
                                </span>
                                <span *ngIf="!isPassword" (click)="showPassword()">
                                    <i class="fa fa-fw fa-eye-slash field-icon1"></i>
                                </span>
                            </li>
                        </ul>
                    </div>
                    <div style="text-align: center;margin-top: 20px; margin-bottom: 25px;">
                        <!-- <div *ngIf="isLoading"
                                                            style="display: flex; justify-content: center; padding-bottom: 5px;">
                                                            <mat-progress-spinner class="example-margin" color="primary"
                                                                mode="indeterminate" [diameter]="30">
                                                            </mat-progress-spinner> 
                                                    </div>-->
                        <div class="row" style="justify-content: center;">
                            <button class="btn btn-sm mr-3 btn-text-style-1" (click)="modal.close('Close click')">Cancel
                            </button>
                            <button class="btn btn-sm btn-text-style-2">Connect
                            </button>
                        </div>
                    </div>

                </div>
            </div>
        </div>
    </div>
</ng-template>

<ng-template #openCheckForUpdateModelContent let-modal>

    <div class="modal-body">
        <div class="modal-body bg-white" style="padding: 0px;">
            <div class="container" style="padding: 16px;">
                <div class="row">
                    <div class="col-12">
                        <div class="model-bold">Checking for Updates</div>
                        <div style="text-align: center;">
                            <ul>
                                <li class="modal-body-data" style="">
                                    <div class="row" style="line-height: 1;">
                                        <div class="col-11">
                                            <div class="progress">
                                                <div class="progress-bar" role="progressbar"
                                                    [ngStyle]="{width: available + '%'}" aria-valuenow="100"
                                                    aria-valuemin="0" aria-valuemax="100">

                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-1 p-0">{{available}}%</div>
                                    </div>
                                </li>
                                <li class="modal-body-data" style="">Checking for updates
                                </li>
                            </ul>
                        </div>
                        <div style="text-align: center;margin-top: 30px; margin-bottom: 25px;">
                            <!-- <div *ngIf="isLoading"
                                                            style="display: flex; justify-content: center; padding-bottom: 5px;">
                                                            <mat-progress-spinner class="example-margin" color="primary"
                                                                mode="indeterminate" [diameter]="30">
                                                            </mat-progress-spinner> 
                                                    </div>-->
                            <div class="row" style="justify-content: center;">
                                <button class="btn btn-sm mr-3 btn-text-style-1"
                                    (click)="modal.close('Close click')">Cancel
                                </button>
                            </div>
                        </div>

                    </div>
                </div>
            </div>
        </div>
    </div>
</ng-template>

<ng-template #openUnableToCheckForUpdateModelContent let-modal>

    <div class="modal-body">
        <div class="modal-body bg-white" style="padding: 0px;">
            <div class="container" style="padding: 16px;">
                <div class="row">
                    <div class="col-md-4 col-3 col-sm-3" style="text-align: center;margin-top: 25px;">
                        <img class="warn-icon"
                            src="../../../../assets/images/ui/Medical-Personnel-Module/icons/urn_aaid.png">
                    </div>
                    <div class="col-md-8 col-9 col-sm-9">
                        <div class="model-bold">Unable to Check for Update</div>
                        <div style="text-align: center;">
                            <ul>
                                <li class="modal-body-data" style="">An error occurred while checking for update. Please
                                    try again.</li>

                            </ul>
                        </div>
                        <div style="text-align: center;margin-top: 20px; margin-bottom: 25px;">
                            <!-- <div *ngIf="isLoading"
                                                            style="display: flex; justify-content: center; padding-bottom: 5px;">
                                                            <mat-progress-spinner class="example-margin" color="primary"
                                                                mode="indeterminate" [diameter]="30">
                                                            </mat-progress-spinner> 
                                                    </div>-->
                            <div class="row" style="justify-content: center;">
                                <button class="btn btn-sm mr-3 btn-text-style-1"
                                    (click)="modal.close('Close click')">Cancel
                                </button>
                                <button class="btn btn-sm btn-text-style-2">Try Again
                                </button>
                            </div>
                        </div>

                    </div>
                </div>
            </div>
        </div>
    </div>
</ng-template>

<ng-template #openYourSystemIsuptoDateModelContent let-modal>

    <div class="modal-body">
        <div class="modal-body bg-white" style="padding: 0px;">
            <div class="container" style="padding: 16px;">
                <div class="row">
                    <div class="col-md-4 col-sm-4 col-4" style="text-align: center;margin-top: 25px;">
                        <img style="width: 3.5rem;"
                            src="../../../../assets/images/ui/Medical-Personnel-Module/icons/update-success.png">
                    </div>
                    <div class="col-md-6 col-sm-8 col-8">
                        <div class="model-bold"></div>
                        <div style="text-align: center;">
                            <ul>
                                <li class="modal-body-data" style="">Your system is up to date.</li>
                                <li class="modal-body-data" style="">Firmware Version V1.0.1.0</li>

                            </ul>
                        </div>
                        <div style="text-align: center;margin-top: 20px; margin-bottom: 25px;">
                            <!-- <div *ngIf="isLoading"
                                                            style="display: flex; justify-content: center; padding-bottom: 5px;">
                                                            <mat-progress-spinner class="example-margin" color="primary"
                                                                mode="indeterminate" [diameter]="30">
                                                            </mat-progress-spinner> 
                                                    </div>-->
                            <div class="row" style="justify-content: center;">
                                <button class="btn btn-sm mr-3 btn-text-style-1"
                                    (click)="modal.close('Close click')">Cancel
                                </button>
                            </div>
                        </div>

                    </div>
                </div>
            </div>
        </div>
    </div>
</ng-template>

<ng-template #openDownloadCheckForUpdateModelContent let-modal>

    <div class="modal-body">
        <div class="modal-body bg-white" style="padding: 0px;">
            <div class="container" style="padding: 16px;">
                <div class="row">
                    <div class="col-md-4 col-sm-2 col-3" style="text-align: center;margin-top: 25px;">
                        <img style="width: 4rem;"
                            src="../../../../assets/images/ui/Medical-Personnel-Module/icons/arrows.png">
                    </div>
                    <div class="col-md-8 col-sm-10 col-9">
                        <div class="model-bold">Check for Update</div>
                        <div style="text-align: start;">
                            <ul>
                                <li class="modal-body-data" style="white-space: nowrap;">New firmware update is
                                    available now.</li>
                                <li class="modal-body-data" style="white-space: nowrap;">Firmware Version V1.0.1.1</li>

                            </ul>
                        </div>

                    </div>
                </div>
                <div class="row">
                    <div class="col-2"></div>
                    <div class="col-md-10 col-sm-12 col-12">

                        <div style="text-align: center;margin-top: 20px; margin-bottom: 25px;">
                            <!-- <div *ngIf="isLoading"
                                                            style="display: flex; justify-content: center; padding-bottom: 5px;">
                                                            <mat-progress-spinner class="example-margin" color="primary"
                                                                mode="indeterminate" [diameter]="30">
                                                            </mat-progress-spinner> 
                                                    </div>-->
                            <div class="row" style="justify-content: center;">
                                <button class="btn btn-sm mr-3 btn-text-style-1"
                                    (click)="modal.close('Close click')">Install and Update Now
                                </button>
                                <button class="btn btn-sm btn-text-style-2" (click)="modal.close('Close click')">Update
                                    Later
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</ng-template>

<ng-template #openUpdatingNewFirmwareModelContent let-modal>

    <div class="modal-body">
        <div class="modal-body bg-white" style="padding: 0px;">
            <div class="container" style="padding: 16px;">
                <div class="row">
                    <div class="col-12">
                        <div class="model-bold">Updating New Firmware</div>
                        <div style="text-align: center;">
                            <ul>
                                <li class="modal-body-data" style="">
                                    <div class="row" style="line-height: 1;">
                                        <div class="col-11">
                                            <div class="progress">
                                                <div class="progress-bar" role="progressbar"
                                                    [ngStyle]="{width: available + '%'}" aria-valuenow="100"
                                                    aria-valuemin="0" aria-valuemax="100">

                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-1 p-0">{{available}}%</div>
                                    </div>
                                </li>
                                <li class="modal-body-data" style="">Updating firmware to v.1.0.1.2
                                </li>
                            </ul>
                        </div>

                    </div>
                </div>
            </div>
        </div>
    </div>
</ng-template>

<ng-template #openScanDevicesModelContent let-modal>

    <div class="modal-header" style="color: #ffffff;
    background: #53B9C6 0% 0% no-repeat padding-box;border: 1px solid #CECECE;opacity: 1;">
        <div class="modal-title justify-content-center" style="" id="modal-basic-title">Select Device</div>
        <img (click)="modal.close('Close click')" style="cursor: pointer;width: 1.2rem;"
            src="../../../../assets/images/ui/Icons/patient-medical-module/Icon material-cancel.png">
    </div>
    <div *ngIf="!selectDevice">
        <div class="modal-body">
            <div class="modal-body bg-white" style="padding: 0px;">
                <div class="container" style="padding: 16px;">
                    <div class="row" style="display: flex;">
                        <div class="col-md-3 col-sm-3 col-5 p-0">
                            <div class="btn btn-sm modal-data-bold" style="border: 1px solid #707070;
                        opacity: 1;
                        width: 85%;" (click)="scanDeviceMethod()">Scan Device</div>
                        </div>
                        <div class="col-md-9 p-0" style="align-self: center;">
                            <div class="modal-data-bold">Please scan and select the device you want to configure.</div>
                        </div>
                    </div>
                    <div class="row" style="padding: 10px; display: flex;justify-content: space-between;">

                        <div class="">
                            <div (click)="selectPatientFromList(listOfDevices)" style="letter-spacing: 0px;
                        color: #53B9C6;
                        opacity: 1;" class="modal-data-bold">Select All</div>
                        </div>
                        <div style="display: flex;">
                            <div><img class="refresh-img" style="margin-right: 5px;"
                                    src="../../../../assets/images/ui/Medical-Personnel-Module/icons/Ionic-md-refresh.png">
                            </div>
                            <div class="modal-data-bold" style="cursor: pointer;padding-top: 3px;align-self: center;"
                                *ngIf="isRefreshing">
                                Scanning...</div>
                            <div class="modal-data-bold" style="cursor: pointer;padding-top: 3px;align-self: center;"
                                *ngIf="!isRefreshing" (click)="recallTheAvailableDevices()">
                                Refresh
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="scroll" style="width: 100%; border: 1px solid #707070">
                            <div *ngIf="!(listOfDevices && listOfDevices.length)"
                                style="text-align: center;background-color: white;padding: 20px;">

                                <div style="text-align: center;font-size: 12px;font-weight: 600;margin-top: 18vh;">
                                    No Results Found.
                                </div>

                            </div>
                            <div *ngFor="let option of listOfDevices ;let i=index;">
                                <!--[ngClass]="{'highlighted': option.deviceID === selectedRow  }"-->
                                <div class="container">
                                    <div class="row select-patient"
                                        style="border-bottom: 1px solid #707070;height: 60px;align-content: space-around;">
                                        <div class="col-1" style="align-self: center;
                                    margin: 10px;">

                                            <div *ngIf="option.isSelected === true ">
                                                <img class="tick-mark" style="position: absolute;
                                                top: -5px;
                                                left: 5px;"
                                                    src="../../../../assets/images/ui/Icons/Icon-awesome-check-circle.png">
                                            </div>
                                        </div>
                                        <div class="col-10 p-0" style="margin: auto;">
                                            <div class="selected-device-alignment"
                                                style="display: flex; justify-content: space-between;">
                                                <div style="padding: 0px;">
                                                    <div class="modal-data-semiBold">{{option.deviceID}}</div>
                                                    <div class="modal-data-normal">{{option.deviceModelNumber}}</div>
                                                </div>
                                                <div style="align-self: center;">
                                                    <img class="menu-icon" style="cursor: pointer;"
                                                        (click)="openDeviceInformationModel(option)"
                                                        src="../../../../assets/images/ui/Icons/1x/menu.png">
                                                    <!--openDeviceInfoMethod(openDeviceInfoModelContent,option)-->
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-12 col-sm-12 col-12">

                            <div style="text-align: center;margin-top: 20px; margin-bottom: 25px;">
                                <!-- <div *ngIf="isLoading"
                                                                style="display: flex; justify-content: center; padding-bottom: 5px;">
                                                                <mat-progress-spinner class="example-margin" color="primary"
                                                                    mode="indeterminate" [diameter]="30">
                                                                </mat-progress-spinner> 
                                                        </div>-->
                                <div class="row" style="justify-content: center;">
                                    <button class="btn btn-sm mr-3 btn-text-style-1"
                                        (click)="modal.close('Close click')">Close
                                    </button>
                                    <button class="btn btn-sm btn-text-style-2"
                                        (click)="modal.close('Close click')">Next</button>
                                </div>
                            </div>
                        </div>
                    </div>

                </div>
            </div>
        </div>
    </div>
    <div *ngIf="selectDevice">
        <div class="loader">Loading...</div>
        <div class="row" style="justify-content: center;margin: 0 0 40px 0;">
            <div class="modal-data-bold">Preparing Devices for Configuration</div>
        </div>
        <!-- <div class="sk-chase">
            <div class="sk-chase-dot black"></div>
            <div class="sk-chase-dot"></div>
            <div class="sk-chase-dot"></div>
            <div class="sk-chase-dot"></div>
            <div class="sk-chase-dot"></div>
            <div class="sk-chase-dot"></div>
        </div> -->
    </div>
</ng-template>

<ng-template #openFetchedDevicesModelContent let-modal>

    <div class="modal-header" style="color: #ffffff;
    background: #53B9C6 0% 0% no-repeat padding-box;border: 1px solid #CECECE;opacity: 1;">
        <div class="modal-title justify-content-center" style="" id="modal-basic-title">Select Device</div>
        <img (click)="modal.close('Close click')" style="cursor: pointer;width: 1.2rem;"
            src="../../../../assets/images/ui/Icons/patient-medical-module/Icon material-cancel.png">
    </div>
    <div class="modal-body bg-white" style="padding: 0px;">
        <div class="container" style="padding: 16px;">
            <div class="row" style="display: flex;justify-content: center;">
                <div class="col-md-4 col-sm-4 col-4 p-0">
                </div>
                <div class="col-md-4 col-sm-4 col-4 p-0" style="text-align: center;margin: 20px 0px;">
                    <img class="success-img"
                        src="../../../../assets/images/ui/Medical-Personnel-Module/icons/update-success.png">
                </div>
                <div class="col-md-4 col-sm-4 col-4 p-0">
                </div>
            </div>
            <div class="row" style="justify-content: center;">
                <div style="text-align: center;">
                    <ul>
                        <li class="modal-body-data" style="">2 Devices have been successfully added to the list.</li>
                        <li class="modal-body-data" style="">You can manage the devices now.</li>
                    </ul>
                </div>
            </div>

            <div class="row">
                <div class="col-md-12 col-sm-12 col-12">

                    <div style="text-align: center;margin-top: 20px; margin-bottom: 25px;">

                        <div class="row" style="justify-content: center;">
                            <button class="btn btn-sm btn-text-style-1" (click)="modal.close('Close click')">Close
                            </button>
                        </div>
                    </div>
                </div>
            </div>

        </div>
    </div>

</ng-template>


<ng-template #openDeviceInfoModelContent let-modal>

    <div class="modal-header" style="color: #ffffff;
    background: #53B9C6 0% 0% no-repeat padding-box;border: 1px solid #CECECE;opacity: 1;">
        <div class="modal-title justify-content-center" style="" id="modal-basic-title">Device Information</div>
        <img (click)="modal.close('Close click')" style="cursor: pointer;width: 1.2rem;"
            src="../../../../assets/images/ui/Icons/patient-medical-module/Icon material-cancel.png">
    </div>
    <div class="modal-body bg-white" style="padding: 0px;">
        <div class="container">
            <div class="row" style="padding: 35px 20px; display: flex;justify-content: center;">
                <div class="col-md-4 col-sm-4 col-4" style="padding: 10px 10px 0px 0px;">
                    <div class="row" style="justify-content: center;padding-bottom: 10px;">
                        <div class="modal-data-semiBold2">
                            {{selectedDeviceInformation.deviceID}}</div>
                    </div>
                    <div class="" style="border: 1px solid #707070;
                                opacity: 1;">
                        <img class="img-fluid" src="{{baseURL+selectedDeviceInformation.deviceImagePath}}">
                    </div>
                    <!-- <img src="{{baseURL+selectedDeviceInformation.deviceImagePath}}"> -->
                </div>
                <div class="col-md-8 col-sm-8 col-8 p-0" style="text-align: center;">
                    <!-- <div>{{selectedDeviceInformation | json}}</div> -->
                    <div class="row" style="padding: 6px;">

                        <div class="col-6" style="text-align: start;">
                            <div class="modal-data-semiBold">Device Name</div>
                        </div>
                        <div class="col-6 p-0" style="text-align: start;">
                            <div class="modal-data-normal">{{selectedDeviceInformation.deviceName}}</div>
                        </div>
                    </div>
                    <div class="row" style="padding: 6px;">

                        <div class="col-6" style="text-align: start;">
                            <div class="modal-data-semiBold">Model No</div>
                        </div>
                        <div class="col-6 p-0" style="text-align: start;">
                            <div class="modal-data-normal">{{selectedDeviceInformation.deviceModelNumber}}</div>
                        </div>

                    </div>
                    <div class="row" style="padding: 6px;">

                        <div class="col-6" style="text-align: start;">
                            <div class="modal-data-semiBold">Product Serial No</div>
                        </div>
                        <div class="col-6 p-0" style="text-align: start;word-wrap: break-word;">
                            <div class="modal-data-normal">{{selectedDeviceInformation.deviceSerialNumber}}</div>
                        </div>

                    </div>
                    <div class="row" style="padding: 6px;">

                        <div class="col-6" style="text-align: start;">
                            <div class="modal-data-semiBold">Hardware Version</div>
                        </div>
                        <div class="col-6 p-0" style="text-align: start;">
                            <div class="modal-data-normal">{{selectedDeviceInformation.deviceHardwareVersion}}</div>
                        </div>

                    </div>
                    <div class="row" style="padding: 6px;">

                        <div class="col-6" style="text-align: start;">
                            <div class="modal-data-semiBold">Software Version</div>
                        </div>
                        <div class="col-6 p-0" style="text-align: start;">
                            <div class="modal-data-normal">{{selectedDeviceInformation.deviceSoftwareVersion}}</div>
                        </div>

                    </div>
                    <div class="row" style="padding: 6px;">

                        <div class="col-6" style="text-align: start;">
                            <div class="modal-data-semiBold">Test Method</div>
                        </div>
                        <div class="col-6 p-0" style="text-align: start;">
                            <div class="modal-data-normal">{{selectedDeviceInformation.testMethod}}</div>
                        </div>

                    </div>
                    <div class="row" style="padding: 6px;">

                        <div class="col-6" style="text-align: start;">
                            <div class="modal-data-semiBold">Manufacturer</div>
                        </div>
                        <div class="col-6 p-0" style="text-align: start;">
                            <div class="modal-data-normal">{{selectedDeviceInformation.manufacturer}}</div>
                        </div>

                    </div>
                    <div class="row" style="padding: 6px;">

                        <div class="col-6" style="text-align: start;">
                            <div class="modal-data-semiBold">Location</div>
                        </div>
                        <div class="col-6 p-0" style="text-align: start;">
                            <div class="modal-data-normal">{{selectedDeviceInformation.location}}</div>
                        </div>

                    </div>
                </div>
            </div>
        </div>
    </div>

</ng-template>